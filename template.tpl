___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "4Magfi Pixel",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Bu etiket şablonu, Magfi\u0027nin Google Etiket Yöneticisi için resmi şablonudur. Magfi Pixel, Magfi Ads reklamlarınızda hem sayfa, hem de etkinlik düzeyinde dönüşüm izlemeye olanak tanır.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "analyticid",
    "displayName": "Magfi Pixel Code",
    "simpleValueType": true
  },
  {
    "type": "SELECT",
    "name": "optionName",
    "displayName": "Options",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "page_view",
        "displayValue": "PageView"
      },
      {
        "value": "lead_info",
        "displayValue": "Lead"
      },
      {
        "value": "purchase",
        "displayValue": "Purchase"
      },
      {
        "value": "subscribe",
        "displayValue": "Subscribe"
      },
      {
        "value": "schedule",
        "displayValue": "Schedule"
      },
      {
        "value": "start_trial",
        "displayValue": "StartTrial"
      }
    ],
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');
const getReferrerUrl = require('getReferrerUrl');
const getQueryParameters = require('getQueryParameters');
const sendPixel = require('sendPixel');
const getTimestamp = require('getTimestamp');
const generateRandom = require('generateRandom');
const getUrl = require("getUrl");
const encodeUri = require("encodeUri");

//cookieFormat = mgf.trackCode.community_id.ads_id.match_id.brandId.timestamp.randomNumber

const cookieName = 'mgfclid';
if (isComeFromMagfi()) {
  if (!isExist()) createCookie();
  setTrackCode(1);
  sendData();
} else {
  setTrackCode(0);
}

function isComeFromMagfi() {
  return !!((isTrackable() && getReferrerUrl(null)=="") || getQueryParameters('mgfclid') || getReferrerUrl(null).indexOf('magfi') != -1) ;
}

function createCookie() {
  let cookie = getQueryParameters(cookieName);
  cookie = !cookie ? 'mgf.1.0.0.0.' + getTimestamp() + '.' + generateRandom(1000, 100000) : cookie;
  return setCookie(cookieName, cookie, {
    domain: 'auto',
    path: '/',
    samesite: 'Lax',
    secure: true,
    'max-age': 2592000, // 30 days
    httpOnly: false,
  });
}

function isExist() {
  return getCookieValues(cookieName).length > 0;
}

function sendData() {
  sendPixel('https://gtm.magfi.link/analytics'+preparePayload());
}

function preparePayload(){
  return encodeUri("?full_cookie="+getCookieValues(cookieName)[0]+"&event_name="+data.optionName+"&analytic_code="+data.analyticid+"&gotm_event_id="+data.gtmEventId+"&page_referrer="+getReferrerUrl()+"&state_url="+getUrl());
}

function isTrackable() {
  let getCookieQ = getCookieValues(cookieName)[0];

  if(getQueryParameters('mgfclid') && getCookieQ){
      const query = getQueryParameters('mgfclid');
      const queryArr = query.split('.');
      const cookieArr = getCookieQ.split('.');

      if(queryArr[2] != cookieArr[2]){
        cookieArr[2] = queryArr[2];
      }
      if(queryArr[3] != cookieArr[3]){
        cookieArr[3] = queryArr[3];
      }
      
      if(queryArr[4]!=cookieArr[4]){
        cookieArr[4] = queryArr[4];
      }
      if(queryArr[5]!=cookieArr[5]){
        cookieArr[5] = queryArr[5];
      }
      
      getCookieQ = cookieArr.join('.');
      setCookie(cookieName, getCookieQ, {
        domain: 'auto',
        path: '/',
        samesite: 'Lax',
        secure: true,
        'max-age': 2592000, // 30 days
        httpOnly: false,
      });
  }
  return getCookieQ ? getCookieQ.split('.')[1] == '1' : false ;
}

function setTrackCode(code) {
  if(!getCookieValues(cookieName)[0]) return false;
  const sc = getCookieValues(cookieName)[0].split('.');
  if (code != sc[1]) sc[1] = code;
  return setCookie(cookieName, sc.join('.'), {
    domain: 'auto',
    path: '/',
    samesite: 'Lax',
    secure: true,
    httpOnly: false,
  });
}

// Etiket tamamlandıktan sonra data.gtmOnSuccess komutunu çağırın.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "get_referrer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mgfid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mgfclid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.magfi.link/*"
              },
              {
                "type": 1,
                "string": "https://*.magfiads.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: test1
  code: |-
    const mockData = {
      // Mocked field values
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
setup: ''


___NOTES___

Created on 10/17/2023, 3:17:02 PM


